/**
 * @author Yura Zhloba <yzh44yzh@gmail.com>
 */

import com.yzh44yzh.scalaAmf._
import org.scalatest.FunSuite

class TestAmfDouble extends FunSuite
{
    test("decode double")
    {
        assert(Amf.decode(BufUtils.mkb(List
                (0x5, 0x3f, -0x7c, 0x7a, -0x1f, 0x47, -0x52, 0x14, 0x7b))) === (AmfType.DOUBLE, 0.01))
        assert(Amf.decode(BufUtils.mkb(List
                (0x5, 0x3f, -0x47, -0x67, -0x67, -0x67, -0x67, -0x67, -0x66))) === (AmfType.DOUBLE, 0.1))
        assert(Amf.decode(BufUtils.mkb(List
                (0x5, 0x3f, -0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00))) === (AmfType.DOUBLE, 0.5))
        assert(Amf.decode(BufUtils.mkb(List
                (0x5, 0x3f, -0xb, 0x47, -0x52, 0x14, 0x7a, -0x1f, 0x48))) === (AmfType.DOUBLE, 1.33))
        assert(Amf.decode(BufUtils.mkb(List
                (0x5, 0x40, 0x6f, 0x48, 0x00, 0x00, 0x00, 0x00, 0x00))) === (AmfType.DOUBLE, 250.25))
        assert(Amf.decode(BufUtils.mkb(List
                (0x5, -0x40, 0x6f, 0x48, 0x00, 0x00, 0x00, 0x00, 0x00))) === (AmfType.DOUBLE, -250.25))
        assert(Amf.decode(BufUtils.mkb(List
                (0x5, 0x41, -0x69, -0x29, -0x7d, -0x1, -0xb, -0x3e, -0x71))) === (AmfType.DOUBLE, 99999999.99))
        assert(Amf.decode(BufUtils.mkb(List
                (0x5, -0x3f, -0x69, -0x29, -0x7d, -0x1, -0xb, -0x3e, -0x71))) === (AmfType.DOUBLE, -99999999.99))
    }
}
